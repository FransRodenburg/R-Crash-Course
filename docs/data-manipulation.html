<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Day 4 Reading &amp; Manipulating Data | R Crash Course</title>
  <meta name="description" content="Day 4 Reading &amp; Manipulating Data | R Crash Course" />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="Day 4 Reading &amp; Manipulating Data | R Crash Course" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Day 4 Reading &amp; Manipulating Data | R Crash Course" />
  
  
  

<meta name="author" content="Dr. F.J. Rodenburg   © 2020–2021 Universiteit Leiden" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="ggplot2.html"/>
<link rel="next" href="MWE.html"/>
<script src="libs/header-attrs-2.11/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">R Crash Course</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Introduction</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#structure-of-this-course"><i class="fa fa-check"></i>Structure of This Course</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#examination"><i class="fa fa-check"></i>Examination</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="installation.html"><a href="installation.html"><i class="fa fa-check"></i><b>1</b> Installation &amp; <code>swirl</code></a>
<ul>
<li class="chapter" data-level="1.1" data-path="installation.html"><a href="installation.html#installation-guide"><i class="fa fa-check"></i><b>1.1</b> Installation Guide</a></li>
<li class="chapter" data-level="1.2" data-path="installation.html"><a href="installation.html#what-is-rstudio"><i class="fa fa-check"></i><b>1.2</b> What is RStudio?</a></li>
<li class="chapter" data-level="1.3" data-path="installation.html"><a href="installation.html#exercises"><i class="fa fa-check"></i><b>1.3</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="base-graphics.html"><a href="base-graphics.html"><i class="fa fa-check"></i><b>2</b> Base Graphics</a>
<ul>
<li class="chapter" data-level="2.1" data-path="base-graphics.html"><a href="base-graphics.html#exercise-easy"><i class="fa fa-check"></i><b>2.1</b> Exercise (easy)</a></li>
<li class="chapter" data-level="2.2" data-path="base-graphics.html"><a href="base-graphics.html#exercise-medium"><i class="fa fa-check"></i><b>2.2</b> Exercise (medium)</a></li>
<li class="chapter" data-level="2.3" data-path="base-graphics.html"><a href="base-graphics.html#exercise-hard"><i class="fa fa-check"></i><b>2.3</b> Exercise (hard)</a></li>
<li class="chapter" data-level="2.4" data-path="base-graphics.html"><a href="base-graphics.html#exercise-swirl"><i class="fa fa-check"></i><b>2.4</b> Exercise (<code>swirl</code>)</a></li>
<li class="chapter" data-level="" data-path="base-graphics.html"><a href="base-graphics.html#hall-of-fame"><i class="fa fa-check"></i>Hall of Fame</a>
<ul>
<li class="chapter" data-level="" data-path="base-graphics.html"><a href="base-graphics.html#r-crash-course-2022"><i class="fa fa-check"></i>R Crash Course (2022)</a></li>
<li class="chapter" data-level="" data-path="base-graphics.html"><a href="base-graphics.html#advanced-statistics-2021"><i class="fa fa-check"></i>Advanced Statistics (2021)</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="ggplot2.html"><a href="ggplot2.html"><i class="fa fa-check"></i><b>3</b> Graphics with <code>ggplot2</code></a>
<ul>
<li class="chapter" data-level="3.1" data-path="ggplot2.html"><a href="ggplot2.html#exercises-1"><i class="fa fa-check"></i><b>3.1</b> Exercises</a></li>
<li class="chapter" data-level="3.2" data-path="ggplot2.html"><a href="ggplot2.html#extra-data-cleaning"><i class="fa fa-check"></i><b>3.2</b> Extra: Data Cleaning (*)</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="data-manipulation.html"><a href="data-manipulation.html"><i class="fa fa-check"></i><b>4</b> Reading &amp; Manipulating Data</a>
<ul>
<li class="chapter" data-level="4.1" data-path="data-manipulation.html"><a href="data-manipulation.html#reading-data"><i class="fa fa-check"></i><b>4.1</b> Reading Data</a></li>
<li class="chapter" data-level="4.2" data-path="data-manipulation.html"><a href="data-manipulation.html#what-is-tidy-data"><i class="fa fa-check"></i><b>4.2</b> What Is Tidy Data?</a></li>
<li class="chapter" data-level="4.3" data-path="data-manipulation.html"><a href="data-manipulation.html#what-is-untidy-data"><i class="fa fa-check"></i><b>4.3</b> What Is Untidy Data?</a></li>
<li class="chapter" data-level="4.4" data-path="data-manipulation.html"><a href="data-manipulation.html#exercise-easy-1"><i class="fa fa-check"></i><b>4.4</b> Exercise (easy)</a></li>
<li class="chapter" data-level="4.5" data-path="data-manipulation.html"><a href="data-manipulation.html#exercise-medium-1"><i class="fa fa-check"></i><b>4.5</b> Exercise (medium)</a></li>
<li class="chapter" data-level="4.6" data-path="data-manipulation.html"><a href="data-manipulation.html#exercise-hard-1"><i class="fa fa-check"></i><b>4.6</b> Exercise (hard)</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="MWE.html"><a href="MWE.html"><i class="fa fa-check"></i><b>5</b> Debugging</a>
<ul>
<li class="chapter" data-level="5.1" data-path="MWE.html"><a href="MWE.html#useful-information"><i class="fa fa-check"></i><b>5.1</b> Useful information:</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="self-test.html"><a href="self-test.html"><i class="fa fa-check"></i>Self-Test</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R Crash Course</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data-manipulation" class="section level1" number="4">
<h1><span class="header-section-number">Day 4</span> Reading &amp; Manipulating Data</h1>
<p><small><i>An introduction to storing and converting data using the tidy format.</p>
<p>Total video length: 4 min.<br />
Exercise length: 30–90 min.</i></small></p>
<hr />
<div id="reading-data" class="section level2" number="4.1">
<h2><span class="header-section-number">4.1</span> Reading Data</h2>
<p>There are many ways to read data into R. A simple method is explained in the video below:</p>
<iframe src="https://www.youtube.com/embed/BGUqZc-Pb8w" width="672" height="400px" data-external="1">
</iframe>
</div>
<div id="what-is-tidy-data" class="section level2" number="4.2">
<h2><span class="header-section-number">4.2</span> What Is Tidy Data?</h2>
<p>A standardized way to store data is by having <strong>rows represent observations</strong> and <strong>columns represent variables</strong>.</p>
<p>For example, take a look at the first few rows of the <code>iris</code> data set:</p>
<table>
<caption>
<span id="tab:unnamed-chunk-20">Table 4.1: </span>Tidy data. Every row is a single flower. Every column is a single variable.
</caption>
<thead>
<tr>
<th style="text-align:center;">
Sepal.Length
</th>
<th style="text-align:center;">
Sepal.Width
</th>
<th style="text-align:center;">
Petal.Length
</th>
<th style="text-align:center;">
Petal.Width
</th>
<th style="text-align:center;">
Species
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center;">
5.1
</td>
<td style="text-align:center;">
3.5
</td>
<td style="text-align:center;">
1.4
</td>
<td style="text-align:center;">
0.2
</td>
<td style="text-align:center;">
setosa
</td>
</tr>
<tr>
<td style="text-align:center;">
4.9
</td>
<td style="text-align:center;">
3.0
</td>
<td style="text-align:center;">
1.4
</td>
<td style="text-align:center;">
0.2
</td>
<td style="text-align:center;">
setosa
</td>
</tr>
<tr>
<td style="text-align:center;">
4.7
</td>
<td style="text-align:center;">
3.2
</td>
<td style="text-align:center;">
1.3
</td>
<td style="text-align:center;">
0.2
</td>
<td style="text-align:center;">
setosa
</td>
</tr>
<tr>
<td style="text-align:center;">
4.6
</td>
<td style="text-align:center;">
3.1
</td>
<td style="text-align:center;">
1.5
</td>
<td style="text-align:center;">
0.2
</td>
<td style="text-align:center;">
setosa
</td>
</tr>
<tr>
<td style="text-align:center;">
5.0
</td>
<td style="text-align:center;">
3.6
</td>
<td style="text-align:center;">
1.4
</td>
<td style="text-align:center;">
0.2
</td>
<td style="text-align:center;">
setosa
</td>
</tr>
<tr>
<td style="text-align:center;">
5.4
</td>
<td style="text-align:center;">
3.9
</td>
<td style="text-align:center;">
1.7
</td>
<td style="text-align:center;">
0.4
</td>
<td style="text-align:center;">
setosa
</td>
</tr>
</tbody>
</table>
</div>
<div id="what-is-untidy-data" class="section level2" number="4.3">
<h2><span class="header-section-number">4.3</span> What Is Untidy Data?</h2>
<p>Sometimes it is tempting to use a different format. For example, here are the first few rows of a fictional qPCR data set performed in triplicates:</p>
<table>
<caption>
<span id="tab:unnamed-chunk-21">Table 4.2: </span>Untidy data. A single row contains three different experimental observations.
</caption>
<thead>
<tr>
<th style="text-align:center;">
Gene
</th>
<th style="text-align:center;">
Treatment
</th>
<th style="text-align:center;">
Ct value in exp. 1
</th>
<th style="text-align:center;">
Ct value in exp. 2
</th>
<th style="text-align:center;">
Ct value in exp. 3
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center;">
A
</td>
<td style="text-align:center;">
control
</td>
<td style="text-align:center;">
22.8
</td>
<td style="text-align:center;">
16.0
</td>
<td style="text-align:center;">
17.2
</td>
</tr>
<tr>
<td style="text-align:center;">
B
</td>
<td style="text-align:center;">
control
</td>
<td style="text-align:center;">
22.2
</td>
<td style="text-align:center;">
15.7
</td>
<td style="text-align:center;">
19.5
</td>
</tr>
<tr>
<td style="text-align:center;">
C
</td>
<td style="text-align:center;">
control
</td>
<td style="text-align:center;">
23.0
</td>
<td style="text-align:center;">
20.4
</td>
<td style="text-align:center;">
23.7
</td>
</tr>
<tr>
<td style="text-align:center;">
D
</td>
<td style="text-align:center;">
control
</td>
<td style="text-align:center;">
14.5
</td>
<td style="text-align:center;">
18.9
</td>
<td style="text-align:center;">
18.9
</td>
</tr>
<tr>
<td style="text-align:center;">
E
</td>
<td style="text-align:center;">
control
</td>
<td style="text-align:center;">
17.6
</td>
<td style="text-align:center;">
22.2
</td>
<td style="text-align:center;">
17.5
</td>
</tr>
<tr>
<td style="text-align:center;">
A
</td>
<td style="text-align:center;">
ADH-/-
</td>
<td style="text-align:center;">
20.8
</td>
<td style="text-align:center;">
15.6
</td>
<td style="text-align:center;">
20.5
</td>
</tr>
</tbody>
</table>
<p>This may look like a more intuitive way to store your data, but most statistical software will not know what to do with it. Every row should contain a single gene’s C<span class="math inline">\(_t\)</span>-value from a single replicate. You can view the correct way to store it <a href="https://docs.google.com/spreadsheets/d/1zBw0JX1JqALqF7m1CLQp4ojd1LUDoYHxnc6xIUYQVYY/">here</a>.</p>
<p>Storing data in tidy format will greatly simplify analysis and almost everything we use in the <a href="https://fransrodenburg.github.io/General-Research-Skills/">GRS course</a> expects data to be in this format.</p>
</div>
<div id="exercise-easy-1" class="section level2" number="4.4">
<h2><span class="header-section-number">4.4</span> Exercise (easy)</h2>
<ol style="list-style-type: decimal">
<li>Watch the <a href="https://youtu.be/BGUqZc-Pb8w">video</a> on how to read data in R;</li>
<li>Download <a href="data/humanheight.xlsx">this Excel file</a>;</li>
<li>Read the data into R as explained in step 1;</li>
<li>Convert the data set to tidy format using R code.</li>
</ol>
<p>There are different ways to complete this exercise. For example you could use the dollar sign (<code>$</code>) or square brackets (<code>[ , ]</code>) to indicate which column you want.</p>
<ol start="5" style="list-style-type: decimal">
<li>Run a <span class="math inline">\(t\)</span>-test to compare male and female height. See the help page for <code>t.test</code>. If you don’t remember which <span class="math inline">\(t\)</span>-test to use when, you may use the default;</li>
<li>Report your conclusion at a significance level of <span class="math inline">\(0.05\)</span>.</li>
</ol>
<p><small>HINT: The following are useful functions you might use for this: <code>c</code> (combine/concatenate), <code>rep</code> (repeat/replicate), <code>rbind</code> (rowbind), <code>cbind</code> (column bind). Use the help files, or Google if needed to find out how they work.</small></p>
</div>
<div id="exercise-medium-1" class="section level2" number="4.5">
<h2><span class="header-section-number">4.5</span> Exercise (medium)</h2>
<p>The following <a href="https://docs.google.com/spreadsheets/d/1zBw0JX1JqALqF7m1CLQp4ojd1LUDoYHxnc6xIUYQVYY/">Google Sheets file</a> contains shows three versions of the same data set. The tab “tidy” is how I wish people sent me data. The tab “untidy” is what students often send me after at least trying to put it in the right format. The tab “headache” is closer to what people send me for consultancy.</p>
<ol style="list-style-type: decimal">
<li>Open the <a href="https://docs.google.com/spreadsheets/d/1zBw0JX1JqALqF7m1CLQp4ojd1LUDoYHxnc6xIUYQVYY/">Google Sheets file</a>;</li>
<li>Download the “untidy” tab as a .csv file and read it into R;</li>
<li>Convert the file to tidy format;</li>
<li>Compare the resulting data frame with the “tidy” tab, to see if you got it right.</li>
</ol>
<p><small>HINT: The following are useful functions: <code>c</code> (combine/concatenate), <code>rep</code> (repeat/replicate), <code>rbind</code> (rowbind), <code>cbind</code> (column bind). Use the help files, or Google if needed to find out how they work.</small></p>
</div>
<div id="exercise-hard-1" class="section level2" number="4.6">
<h2><span class="header-section-number">4.6</span> Exercise (hard)</h2>
<p>These two toy examples are very small data sets, so you might argue that it would be simpler to just fix them in Excel (I wouldn’t disagree). However, if these were several dozen, or even hundreds of genes, then copy-pasting is dangerous, error-prone business.</p>
<ol style="list-style-type: decimal">
<li>Open the <a href="https://docs.google.com/spreadsheets/d/1zBw0JX1JqALqF7m1CLQp4ojd1LUDoYHxnc6xIUYQVYY/">Google Sheets file</a>;</li>
<li>Download the “headache” tab as a .csv file and read it into R;</li>
<li>Convert the file to tidy format;</li>
<li>Compare the resulting data frame with the “tidy” tab, to see if you got it right;</li>
<li>Using the internet and any other resource you like, try plotting the different gene/treatment combinations in a single plot;</li>
<li>Bonus points if you can complete this exercise without developing a headache.</li>
</ol>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="ggplot2.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="MWE.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["R Crash Course.pdf", "R Crash Course.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection",
"scroll_highlight": true
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
